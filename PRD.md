# 光伏关断器检测数据管理系统产品需求文档 (PRD)

## 1. 产品概述

### 1.1 产品名称
**Solar Shutdown Device Test Data Management System (SDTDMS)**
光伏关断器检测数据管理系统

### 1.2 产品愿景
构建一个工业级、现代化的光伏关断器检测数据管理平台，通过智能化数据采集、分析和可视化，为光伏产业提供高效、可靠的设备质量监控和数据洞察能力，推动光伏安全技术的标准化和智能化发展。

### 1.3 产品定位
- **目标市场**: 光伏制造企业、检测认证机构、质量监管部门
- **核心价值**: 数据驱动的质量管理、实时监控、智能分析、合规追溯
- **差异化优势**: 工业级UI设计、实时数据大屏、云端部署、移动端适配

### 1.4 技术架构
- **前端框架**: Next.js 15 (React 18)
- **UI设计**: 工业风格、响应式设计、数据可视化
- **后端服务**: Supabase (PostgreSQL + 实时订阅)
- **部署平台**: Netlify (边缘计算、全球CDN)
- **数据格式**: Excel导入/导出、JSON API

## 2. 用户角色与权限

### 2.1 系统管理员
- 系统配置管理
- 用户权限管理
- 数据备份恢复
- 系统日志审计

### 2.2 检测工程师
- 测试数据录入
- Excel批量导入
- 数据查询分析
- 报告生成导出

### 2.3 质量主管
- 数据大屏监控
- 趋势分析报告
- 异常告警管理
- 决策支持分析

### 2.4 访客用户
- 公开数据查看
- 统计报告浏览
- 有限的数据导出

## 3. 核心功能模块

### 3.1 数据采集与管理

#### 3.1.1 Excel数据导入
- **功能描述**: 支持批量导入光伏关断器测试数据
- **支持格式**: .xlsx, .xls, .csv
- **数据校验**: 
  - 格式验证
  - 数据完整性检查
  - 重复数据检测
  - 异常值标记
- **智能识别**: 
  - 自动识别表头
  - 字段映射
  - 单位转换

#### 3.1.2 数据录入界面
- **表单设计**: 分步骤录入、实时保存
- **数据类型**:
  - 基础信息: 设备型号、批次号、生产日期
  - 测试参数: 电压、电流、功率、温度
  - 测试结果: 合格/不合格、偏差值
  - 环境条件: 温湿度、大气压力

#### 3.1.3 数据查询与筛选
- **多维度搜索**: 时间范围、设备型号、测试类型
- **高级筛选**: 组合条件、自定义筛选器
- **快速检索**: 全文搜索、智能推荐

### 3.2 数据可视化大屏

#### 3.2.1 实时监控大屏
- **布局设计**: 
  - 顶部: 关键指标卡片（合格率、测试总量、异常数）
  - 中部: 实时趋势图、分布图
  - 底部: 设备状态、最新告警
- **视觉元素**:
  - 渐变色彩方案
  - 动态数据刷新
  - 粒子动画效果
  - 3D数据展示

#### 3.2.2 统计分析图表
- **图表类型**:
  - 折线图: 时间序列分析
  - 柱状图: 对比分析
  - 饼图: 占比分析
  - 散点图: 相关性分析
  - 热力图: 密度分布
  - 雷达图: 多维度评估
- **交互功能**:
  - 图表联动
  - 数据钻取
  - 时间轴拖拽
  - 数据点详情

#### 3.2.3 设备健康指数
- **评分模型**: 基于历史数据的设备性能评分
- **预警机制**: 阈值告警、趋势预警
- **维护建议**: 智能推荐维护时机

### 3.3 报告生成系统

#### 3.3.1 自动报告生成
- **报告模板**: 
  - 日报/周报/月报
  - 质量分析报告
  - 合规性报告
- **内容定制**: 可配置报告内容和格式
- **格式支持**: PDF, Excel, Word

#### 3.3.2 数据导出
- **批量导出**: 支持大数据量导出
- **格式转换**: 多种数据格式转换
- **定时任务**: 自动生成并发送报告

### 3.4 系统管理

#### 3.4.1 用户管理
- **账户体系**: 注册、登录、权限分配
- **安全认证**: JWT令牌、双因素认证
- **操作日志**: 用户行为追踪

#### 3.4.2 配置管理
- **参数配置**: 测试标准、阈值设置
- **界面定制**: 主题切换、布局调整
- **通知设置**: 告警规则、通知方式

## 4. 非功能性需求

### 4.1 性能要求
- **响应时间**: 页面加载 < 2秒
- **并发用户**: 支持1000+并发
- **数据处理**: 百万级数据秒级查询
- **实时性**: 数据更新延迟 < 1秒

### 4.2 安全要求
- **数据加密**: HTTPS传输、数据库加密
- **访问控制**: 基于角色的权限管理
- **审计日志**: 完整的操作记录
- **备份恢复**: 自动备份、快速恢复

### 4.3 可用性要求
- **系统可用性**: 99.9% SLA
- **跨平台支持**: PC、平板、移动端
- **浏览器兼容**: Chrome、Firefox、Safari、Edge
- **响应式设计**: 自适应不同屏幕尺寸

### 4.4 扩展性要求
- **模块化架构**: 易于添加新功能
- **API接口**: RESTful API设计
- **插件系统**: 支持第三方集成
- **微服务架构**: 服务解耦、独立部署

## 5. UI/UX设计规范

### 5.1 设计原则
- **工业美学**: 简洁、专业、高效
- **数据优先**: 突出数据展示和分析
- **用户友好**: 直观的操作流程
- **视觉层次**: 清晰的信息架构

### 5.2 色彩方案
- **主色调**: 
  - 深蓝色 (#1B2951) - 专业、可靠
  - 科技蓝 (#0066FF) - 现代、创新
- **辅助色**:
  - 成功绿 (#00D084) - 正常、合格
  - 警告橙 (#FF8C00) - 注意、警告
  - 危险红 (#FF3B30) - 错误、不合格
- **中性色**:
  - 背景色 (#F5F7FA) - 舒适阅读
  - 文字色 (#2C3E50) - 高对比度

### 5.3 字体规范
- **标题字体**: Inter, -apple-system, 'Helvetica Neue'
- **正文字体**: 'PingFang SC', 'Microsoft YaHei'
- **数据字体**: 'Roboto Mono', 'Monaco'

### 5.4 组件设计
- **卡片式布局**: 信息模块化展示
- **阴影效果**: 层次感和深度
- **过渡动画**: 平滑的交互体验
- **加载状态**: 骨架屏、进度条

## 6. 数据模型设计

### 6.1 核心数据表

#### 6.1.1 测试批次表 (test_batches)
```sql
- id: UUID (主键)
- batch_number: 批次号
- device_model: 设备型号
- manufacturer: 制造商
- production_date: 生产日期
- test_date: 测试日期
- operator_id: 操作员ID
- status: 状态（进行中/已完成）
- created_at: 创建时间
- updated_at: 更新时间
```

#### 6.1.2 测试数据表 (test_data)
```sql
- id: UUID (主键)
- batch_id: 批次ID (外键)
- test_item: 测试项目
- test_value: 测试值
- unit: 单位
- standard_value: 标准值
- deviation: 偏差
- result: 结果（合格/不合格）
- test_conditions: 测试条件(JSON)
- created_at: 创建时间
```

#### 6.1.3 设备信息表 (devices)
```sql
- id: UUID (主键)
- device_code: 设备编码
- device_name: 设备名称
- specifications: 规格参数(JSON)
- certification: 认证信息
- created_at: 创建时间
- updated_at: 更新时间
```

### 6.2 数据关系
- 一个批次包含多条测试数据
- 一个设备可以有多个测试批次
- 用户与测试批次多对多关系

## 7. API接口设计

### 7.1 RESTful API
```
GET    /api/batches          # 获取批次列表
POST   /api/batches          # 创建新批次
GET    /api/batches/:id      # 获取批次详情
PUT    /api/batches/:id      # 更新批次信息
DELETE /api/batches/:id      # 删除批次

GET    /api/test-data        # 获取测试数据
POST   /api/test-data        # 添加测试数据
POST   /api/test-data/import # 批量导入数据
GET    /api/test-data/export # 导出数据

GET    /api/analytics/dashboard   # 获取仪表板数据
GET    /api/analytics/trends      # 获取趋势分析
GET    /api/analytics/statistics  # 获取统计数据
```

### 7.2 WebSocket实时接口
```
ws://api/realtime/dashboard  # 实时仪表板数据
ws://api/realtime/alerts     # 实时告警推送
```

## 8. 开发计划

### 8.1 第一阶段：基础功能（2周）
- [ ] 项目初始化和环境配置
- [ ] 数据库设计和Supabase集成
- [ ] 基础UI组件开发
- [ ] 用户认证系统

### 8.2 第二阶段：核心功能（3周）
- [ ] Excel数据导入功能
- [ ] 数据管理CRUD操作
- [ ] 基础数据查询和筛选
- [ ] 简单图表展示

### 8.3 第三阶段：数据大屏（2周）
- [ ] 数据大屏设计和开发
- [ ] 实时数据更新机制
- [ ] 高级图表组件
- [ ] 交互动画效果

### 8.4 第四阶段：高级功能（2周）
- [ ] 报告生成系统
- [ ] 数据分析算法
- [ ] 告警系统
- [ ] 移动端适配

### 8.5 第五阶段：优化部署（1周）
- [ ] 性能优化
- [ ] 安全加固
- [ ] 部署到Netlify
- [ ] 用户培训文档

## 9. 成功指标

### 9.1 技术指标
- 页面加载时间 < 2秒
- 系统可用性 > 99.9%
- 数据准确率 100%
- 并发用户支持 > 1000

### 9.2 业务指标
- 数据录入效率提升 80%
- 报告生成时间减少 90%
- 用户满意度 > 95%
- 数据分析准确度 > 98%

## 10. 风险与对策

### 10.1 技术风险
- **风险**: 大数据量性能问题
- **对策**: 数据分页、缓存优化、索引优化

### 10.2 安全风险
- **风险**: 数据泄露风险
- **对策**: 加密存储、访问控制、审计日志

### 10.3 业务风险
- **风险**: 用户接受度低
- **对策**: 用户培训、渐进式推广、反馈优化

## 11. 附录

### 11.1 术语表
- **光伏关断器**: Photovoltaic Rapid Shutdown Device
- **SLA**: Service Level Agreement (服务级别协议)
- **CRUD**: Create, Read, Update, Delete (增删改查)
- **JWT**: JSON Web Token

### 11.2 参考资料
- Next.js官方文档
- Supabase开发指南
- 光伏行业标准规范
- 工业UI设计最佳实践

---

**文档版本**: v1.0  
**更新日期**: 2025-09-13  
**编制人**: AI产品经理  
**审核人**: 待定  
**批准人**: 待定